<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>geo_names.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3-20001105 on Sun Mar 4 23:32:44 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>geo_names.c</h1><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> * geo_names.c</font>
00003 <font class="comment"> *</font>
00004 <font class="comment"> *  This encapsulates all of the value-naming mechanism of </font>
00005 <font class="comment"> *  libgeotiff. </font>
00006 <font class="comment"> *</font>
00007 <font class="comment"> *  Written By: Niles Ritter</font>
00008 <font class="comment"> */</font>
00009 
00010 <font class="preprocessor">#include "geotiffio.h"</font>
00011 <font class="preprocessor">#include "geonames.h"</font>
00012 <font class="preprocessor">#include "geo_tiffp.h"</font> <font class="comment">/* for tag names */</font>
00013 
00014 <font class="keyword">static</font> KeyInfo _formatInfo[] =  {
00015    {TYPE_BYTE,    <font class="stringliteral">"Byte"</font>},
00016    {TYPE_SHORT,   <font class="stringliteral">"Short"</font>},
00017    {TYPE_LONG,    <font class="stringliteral">"Long"</font>},
00018    {TYPE_RATIONAL,<font class="stringliteral">"Rational"</font>},
00019    {TYPE_ASCII,   <font class="stringliteral">"Ascii"</font>},
00020    {TYPE_FLOAT,   <font class="stringliteral">"Float"</font>},
00021    {TYPE_DOUBLE,  <font class="stringliteral">"Double"</font>},
00022    {TYPE_SBYTE,   <font class="stringliteral">"SignedByte"</font>},
00023    {TYPE_SSHORT,  <font class="stringliteral">"SignedShort"</font>},
00024    {TYPE_SLONG,  <font class="stringliteral">"SignedLong"</font>},
00025    {TYPE_UNKNOWN, <font class="stringliteral">"Unknown"</font>},
00026     END_LIST
00027 };
00028 
00029 <font class="keyword">static</font> KeyInfo _tagInfo[] =  {
00030     {GTIFF_PIXELSCALE,  <font class="stringliteral">"ModelPixelScaleTag"</font>},
00031     {GTIFF_TRANSMATRIX, <font class="stringliteral">"ModelTransformationTag"</font>},
00032     {GTIFF_TIEPOINTS,   <font class="stringliteral">"ModelTiepointTag"</font>},
00033      <font class="comment">/* This alias maps the Intergraph symbol to the current tag */</font>
00034     {GTIFF_TRANSMATRIX, <font class="stringliteral">"IntergraphMatrixTag"</font>},
00035     END_LIST
00036 };
00037 
00038 <font class="keyword">static</font> <font class="keywordtype">char</font> *FindName(KeyInfo *info,<font class="keywordtype">int</font> key)<font class="keyword"></font>
00039 <font class="keyword"></font>{
00040    <font class="keyword">static</font> <font class="keywordtype">char</font> errmsg[80];
00041    
00042    <font class="keywordflow">while</font> (info-&gt;ki_key&gt;=0 &amp;&amp; info-&gt;ki_key != key) info++;
00043 
00044    <font class="keywordflow">if</font> (info-&gt;ki_key&lt;0)
00045    {
00046            sprintf(errmsg,<font class="stringliteral">"Unknown-%d"</font>, key );
00047            <font class="keywordflow">return</font> errmsg;
00048    }
00049    <font class="keywordflow">return</font> info-&gt;ki_name;
00050 }
00051 
00052 <font class="keywordtype">char</font> *GTIFKeyName(geokey_t key)<font class="keyword"></font>
00053 <font class="keyword"></font>{
00054    <font class="keywordflow">return</font> FindName( &amp;_keyInfo[0],key);
00055 }
00056 
00057 <font class="keywordtype">char</font> *GTIFTypeName(tagtype_t type)<font class="keyword"></font>
00058 <font class="keyword"></font>{
00059    <font class="keywordflow">return</font> FindName( &amp;_formatInfo[0],type);
00060 }
00061 
00062 <font class="keywordtype">char</font> *GTIFTagName(<font class="keywordtype">int</font> tag)<font class="keyword"></font>
00063 <font class="keyword"></font>{
00064    <font class="keywordflow">return</font> FindName( &amp;_tagInfo[0],tag);
00065 }
00066 
00067 <font class="keywordtype">char</font> *GTIFValueName(geokey_t key, <font class="keywordtype">int</font> value)<font class="keyword"></font>
00068 <font class="keyword"></font>{
00069    KeyInfo *info;
00070    
00071    <font class="keywordflow">switch</font> (key)
00072    {
00073         <font class="comment">/* All codes using linear/angular/whatever units */</font>
00074         <font class="keywordflow">case</font> GeogLinearUnitsGeoKey: 
00075         <font class="keywordflow">case</font> ProjLinearUnitsGeoKey: 
00076         <font class="keywordflow">case</font> GeogAngularUnitsGeoKey: 
00077         <font class="keywordflow">case</font> GeogAzimuthUnitsGeoKey: 
00078                                       info=_geounitsValue; <font class="keywordflow">break</font>;
00079 
00080         <font class="comment">/* put other key-dependent lists here */</font>
00081         <font class="keywordflow">case</font> GTModelTypeGeoKey:       info=_modeltypeValue; <font class="keywordflow">break</font>;
00082         <font class="keywordflow">case</font> GTRasterTypeGeoKey:      info=_rastertypeValue; <font class="keywordflow">break</font>;
00083         <font class="keywordflow">case</font> GeographicTypeGeoKey:    info=_geographicValue; <font class="keywordflow">break</font>;
00084         <font class="keywordflow">case</font> GeogGeodeticDatumGeoKey: info=_geodeticdatumValue; <font class="keywordflow">break</font>;
00085         <font class="keywordflow">case</font> GeogEllipsoidGeoKey:     info=_ellipsoidValue; <font class="keywordflow">break</font>;
00086         <font class="keywordflow">case</font> GeogPrimeMeridianGeoKey: info=_primemeridianValue; <font class="keywordflow">break</font>;
00087         <font class="keywordflow">case</font> ProjectedCSTypeGeoKey:   info=_pcstypeValue; <font class="keywordflow">break</font>;
00088         <font class="keywordflow">case</font> ProjectionGeoKey:        info=_projectionValue; <font class="keywordflow">break</font>;
00089         <font class="keywordflow">case</font> ProjCoordTransGeoKey:    info=_coordtransValue; <font class="keywordflow">break</font>;
00090         <font class="keywordflow">case</font> VerticalCSTypeGeoKey:    info=_vertcstypeValue; <font class="keywordflow">break</font>;
00091         <font class="keywordflow">case</font> VerticalDatumGeoKey:     info=_vdatumValue; <font class="keywordflow">break</font>;
00092 
00093         <font class="comment">/* And if all else fails... */</font>
00094         <font class="keywordflow">default</font>:                      info = _csdefaultValue;<font class="keywordflow">break</font>;
00095    }
00096    
00097    <font class="keywordflow">return</font> FindName( info,value);
00098 }
00099 
00100 <font class="comment">/* </font>
00101 <font class="comment"> * Inverse Utilities (name-&gt;code) </font>
00102 <font class="comment"> */</font>
00103 
00104 
00105 <font class="keyword">static</font> <font class="keywordtype">int</font> FindCode(KeyInfo *info,<font class="keywordtype">char</font> *key)<font class="keyword"></font>
00106 <font class="keyword"></font>{
00107    <font class="keywordflow">while</font> (info-&gt;ki_key&gt;=0 &amp;&amp; strcmp(info-&gt;ki_name,key) ) info++;
00108 
00109    <font class="keywordflow">if</font> (info-&gt;ki_key&lt;0)
00110    {
00111         <font class="comment">/* not a registered key; might be generic code */</font>
00112         <font class="keywordflow">if</font> (!strncmp(key,<font class="stringliteral">"Unknown-"</font>,8))
00113         {
00114                 <font class="keywordtype">int</font> code=-1;
00115                 sscanf(key,<font class="stringliteral">"Unknown-%d"</font>,&amp;code);
00116                 <font class="keywordflow">return</font> code;
00117         }
00118         <font class="keywordflow">else</font> <font class="keywordflow">return</font> -1;
00119    }
00120    <font class="keywordflow">return</font> info-&gt;ki_key;
00121 }
00122 
00123 <font class="keywordtype">int</font> GTIFKeyCode(<font class="keywordtype">char</font> *key)<font class="keyword"></font>
00124 <font class="keyword"></font>{
00125    <font class="keywordflow">return</font> FindCode( &amp;_keyInfo[0],key);
00126 }
00127 
00128 <font class="keywordtype">int</font> GTIFTypeCode(<font class="keywordtype">char</font> *type)<font class="keyword"></font>
00129 <font class="keyword"></font>{
00130    <font class="keywordflow">return</font> FindCode( &amp;_formatInfo[0],type);
00131 }
00132 
00133 <font class="keywordtype">int</font> GTIFTagCode(<font class="keywordtype">char</font> *tag)<font class="keyword"></font>
00134 <font class="keyword"></font>{
00135    <font class="keywordflow">return</font> FindCode( &amp;_tagInfo[0],tag);
00136 }
00137 
00138 
00139 <font class="comment">/*</font>
00140 <font class="comment"> *  The key must be determined with GTIFKeyCode() before</font>
00141 <font class="comment"> *  the name can be encoded.</font>
00142 <font class="comment"> */</font>
00143 <font class="keywordtype">int</font> GTIFValueCode(geokey_t key, <font class="keywordtype">char</font> *name)<font class="keyword"></font>
00144 <font class="keyword"></font>{
00145    KeyInfo *info;
00146    
00147    <font class="keywordflow">switch</font> (key)
00148    {
00149         <font class="comment">/* All codes using linear/angular/whatever units */</font>
00150         <font class="keywordflow">case</font> GeogLinearUnitsGeoKey: 
00151         <font class="keywordflow">case</font> ProjLinearUnitsGeoKey: 
00152         <font class="keywordflow">case</font> GeogAngularUnitsGeoKey: 
00153         <font class="keywordflow">case</font> GeogAzimuthUnitsGeoKey: 
00154                                       info=_geounitsValue; <font class="keywordflow">break</font>;
00155 
00156         <font class="comment">/* put other key-dependent lists here */</font>
00157         <font class="keywordflow">case</font> GTModelTypeGeoKey:       info=_modeltypeValue; <font class="keywordflow">break</font>;
00158         <font class="keywordflow">case</font> GTRasterTypeGeoKey:      info=_rastertypeValue; <font class="keywordflow">break</font>;
00159         <font class="keywordflow">case</font> GeographicTypeGeoKey:    info=_geographicValue; <font class="keywordflow">break</font>;
00160         <font class="keywordflow">case</font> GeogGeodeticDatumGeoKey: info=_geodeticdatumValue; <font class="keywordflow">break</font>;
00161         <font class="keywordflow">case</font> GeogEllipsoidGeoKey:     info=_ellipsoidValue; <font class="keywordflow">break</font>;
00162         <font class="keywordflow">case</font> GeogPrimeMeridianGeoKey: info=_primemeridianValue; <font class="keywordflow">break</font>;
00163         <font class="keywordflow">case</font> ProjectedCSTypeGeoKey:   info=_pcstypeValue; <font class="keywordflow">break</font>;
00164         <font class="keywordflow">case</font> ProjectionGeoKey:        info=_projectionValue; <font class="keywordflow">break</font>;
00165         <font class="keywordflow">case</font> ProjCoordTransGeoKey:    info=_coordtransValue; <font class="keywordflow">break</font>;
00166         <font class="keywordflow">case</font> VerticalCSTypeGeoKey:    info=_vertcstypeValue; <font class="keywordflow">break</font>;
00167         <font class="keywordflow">case</font> VerticalDatumGeoKey:     info=_vdatumValue; <font class="keywordflow">break</font>;
00168 
00169         <font class="comment">/* And if all else fails... */</font>
00170         <font class="keywordflow">default</font>:                      info = _csdefaultValue;<font class="keywordflow">break</font>;
00171    }
00172    
00173    <font class="keywordflow">return</font> FindCode( info,name);
00174 }
00175 
</div></pre><hr><address><small>Generated at Sun Mar 4 23:32:44 2001 for libgeotiff by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3-20001105 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
