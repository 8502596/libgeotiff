<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>geotiff.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3-20001105 on Sun Mar 4 23:32:45 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>geotiff.h File Reference</h1><code>#include "geo_config.h"</code><br>
<code>#include "geokeys.h"</code><br>

<p>
<a href="geotiff_h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>GTIF CPL_DLL*&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a18">GTIFNew</a> (void *tif)</td></tr>
<tr><td nowrap align=right valign=top>void CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a19">GTIFFree</a> (GTIF *gtif)</td></tr>
<tr><td nowrap align=right valign=top>int CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a20">GTIFWriteKeys</a> (GTIF *gtif)</td></tr>
<tr><td nowrap align=right valign=top>int CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a23">GTIFKeyGet</a> (GTIF *gtif, geokey_t key, void *val, int index, int count)</td></tr>
<tr><td nowrap align=right valign=top>int CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a24">GTIFKeySet</a> (GTIF *gtif, geokey_t keyID, tagtype_t type, int count,...)</td></tr>
<tr><td nowrap align=right valign=top>int CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a35">GTIFImageToPCS</a> ( GTIF *gtif, double *x, double *y )</td></tr>
<tr><td nowrap align=right valign=top>int CPL_DLL&nbsp;</td><td valign=bottom><a class="el" href="geotiff_h.html#a36">GTIFPCSToImage</a> ( GTIF *gtif, double *x, double *y )</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
Primary libgeotiff include file.
<p>
This is the defacto registry for valid GEOTIFF GeoKeys and their associated symbolic values. This is also the only file of the GeoTIFF library which needs to be included in client source code.
<p>
<hr><h2>Function Documentation</h2>
<a name="a19" doxytag="geotiff.h::GTIFFree"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void CPL_DLL GTIFFree (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function deallocates an existing GeoTIFF access handle previously created with <a class="el" href="geotiff_h.html#a18">GTIFNew</a>(). If the handle was used to write GeoTIFF keys to the TIFF file, the  <a class="el" href="geotiff_h.html#a20">GTIFWriteKeys</a>() function should be used to flush results to the file before calling <a class="el" href="geotiff_h.html#a19">GTIFFree</a>(). <a class="el" href="geotiff_h.html#a19">GTIFFree</a>() should be called before <a class="el" href="xtiffio_h.html#a11">XTIFFClose</a>() is called on the corresponding TIFF file handle.
<p>
     </td>
  </tr>
</table>
<a name="a35" doxytag="geotiff.h::GTIFImageToPCS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int CPL_DLL GTIFImageToPCS (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double * <em>x</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double * <em>y</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Translate a pixel/line coordinate to projection coordinates.
<p>
At this time this function does not support image to PCS translations for tiepoints-only definitions, only pixelscale and transformation matrix formulations.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>gtif</em>
&nbsp;</td><td>
 The handle from <a class="el" href="geotiff_h.html#a18">GTIFNew</a>() indicating the target file. </td></tr>
<tr><td valign=top><em>x</em>
&nbsp;</td><td>
 A pointer to the double containing the pixel offset on input, and into which the easting/longitude will be put on completion. </td></tr>
<tr><td valign=top><em>y</em>
&nbsp;</td><td>
 A pointer to the double containing the line offset on input, and into which the northing/latitude will be put on completion.
<p>
</td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 TRUE if the transformation succeeds, or FALSE if it fails. It may fail if the file doesn't have properly setup transformation information, or it is in a form unsupported by this function. </dl>    </td>
  </tr>
</table>
<a name="a23" doxytag="geotiff.h::GTIFKeyGet"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int CPL_DLL GTIFKeyGet (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
geokey_t <em>key</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
void * <em>val</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>index</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>count</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function reads the value of a single GeoKey from a GeoTIFF file.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>gtif</em>
&nbsp;</td><td>
 The geotiff information handle from <a class="el" href="geotiff_h.html#a18">GTIFNew</a>().</td></tr>
<tr><td valign=top><em>thekey</em>
&nbsp;</td><td>
 The geokey_t name (such as ProjectedCSTypeGeoKey). This must come from the list of legal geokey_t values (an enumeration) listed below.</td></tr>
<tr><td valign=top><em>val</em>
&nbsp;</td><td>
 The <b>val</b> argument is a pointer to the variable into which the value should be read. The type of the variable varies depending on the geokey_t given. While there is no ready mapping of geokey_t values onto types, in general code values are of type <em>short</em>, citations are strings, and everything else is of type <em>double</em>. Note that pointer's to <em>int</em> should never be passed to <a class="el" href="geotiff_h.html#a23">GTIFKeyGet</a>() for integer values as they will be shorts, and the int's may not be properly initialized (and will be grossly wrong on MSB systems).</td></tr>
<tr><td valign=top><em>index</em>
&nbsp;</td><td>
 Indicates how far into the list of values for this geokey to offset. Should normally be zero.</td></tr>
<tr><td valign=top><em>count</em>
&nbsp;</td><td>
 Indicates how many values to read. At this time all keys except for strings have only one value, so <b>index</b> should be zero, and <b>count</b> should be one.
<p>
</td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 The <a class="el" href="geotiff_h.html#a23">GTIFKeyGet</a>() function returns the number of values read. Normally this would be one if successful or zero if the key doesn't exist for this file.
<p>
</dl>From geokeys.inc we see the following geokey_t values are possible:
<p>

<p>
<pre>
-- 6.2.1 GeoTIFF Configuration Keys --

ValuePair(  GTModelTypeGeoKey,	1024) -- Section 6.3.1.1 Codes       --
ValuePair(  GTRasterTypeGeoKey,	1025) -- Section 6.3.1.2 Codes       --
ValuePair(  GTCitationGeoKey,	1026) -- documentation --

-- 6.2.2 Geographic CS Parameter Keys --

ValuePair(  GeographicTypeGeoKey,	2048) -- Section 6.3.2.1 Codes     --
ValuePair(  GeogCitationGeoKey,	2049) -- documentation             --
ValuePair(  GeogGeodeticDatumGeoKey,	2050) -- Section 6.3.2.2 Codes     --
ValuePair(  GeogPrimeMeridianGeoKey,	2051) -- Section 6.3.2.4 codes     --
ValuePair(  GeogLinearUnitsGeoKey,	2052) -- Section 6.3.1.3 Codes     --
ValuePair(  GeogLinearUnitSizeGeoKey,	2053) -- meters                    --
ValuePair(  GeogAngularUnitsGeoKey,	2054) -- Section 6.3.1.4 Codes     --
ValuePair(  GeogAngularUnitSizeGeoKey,	2055) -- radians                   --
ValuePair(  GeogEllipsoidGeoKey,	2056) -- Section 6.3.2.3 Codes     --
ValuePair(  GeogSemiMajorAxisGeoKey,	2057) -- GeogLinearUnits           --
ValuePair(  GeogSemiMinorAxisGeoKey,	2058) -- GeogLinearUnits           --
ValuePair(  GeogInvFlatteningGeoKey,	2059) -- ratio                     --
ValuePair(  GeogAzimuthUnitsGeoKey,	2060) -- Section 6.3.1.4 Codes     --
ValuePair(  GeogPrimeMeridianLongGeoKey,	2061) -- GeoAngularUnit            --

-- 6.2.3 Projected CS Parameter Keys --
--    Several keys have been renamed,--
--    and the deprecated names aliased for backward compatibility --

ValuePair(  ProjectedCSTypeGeoKey,	3072)     -- Section 6.3.3.1 codes   --
ValuePair(  PCSCitationGeoKey,	3073)     -- documentation           --
ValuePair(  ProjectionGeoKey,	3074)     -- Section 6.3.3.2 codes   --
ValuePair(  ProjCoordTransGeoKey,	3075)     -- Section 6.3.3.3 codes   --
ValuePair(  ProjLinearUnitsGeoKey,	3076)     -- Section 6.3.1.3 codes   --
ValuePair(  ProjLinearUnitSizeGeoKey,	3077)     -- meters                  --
ValuePair(  ProjStdParallel1GeoKey,	3078)     -- GeogAngularUnit --
ValuePair(  ProjStdParallelGeoKey,ProjStdParallel1GeoKey) -- ** alias **   --
ValuePair(  ProjStdParallel2GeoKey,	3079)     -- GeogAngularUnit --
ValuePair(  ProjNatOriginLongGeoKey,	3080)     -- GeogAngularUnit --
ValuePair(  ProjOriginLongGeoKey,ProjNatOriginLongGeoKey) -- ** alias **     --
ValuePair(  ProjNatOriginLatGeoKey,	3081)     -- GeogAngularUnit --
ValuePair(  ProjOriginLatGeoKey,ProjNatOriginLatGeoKey)   -- ** alias **     --
ValuePair(  ProjFalseEastingGeoKey,	3082)     -- ProjLinearUnits --
ValuePair(  ProjFalseNorthingGeoKey,	3083)     -- ProjLinearUnits --
ValuePair(  ProjFalseOriginLongGeoKey,	3084)     -- GeogAngularUnit --
ValuePair(  ProjFalseOriginLatGeoKey,	3085)     -- GeogAngularUnit --
ValuePair(  ProjFalseOriginEastingGeoKey,	3086)     -- ProjLinearUnits --
ValuePair(  ProjFalseOriginNorthingGeoKey,	3087)     -- ProjLinearUnits --
ValuePair(  ProjCenterLongGeoKey,	3088)     -- GeogAngularUnit --
ValuePair(  ProjCenterLatGeoKey,	3089)     -- GeogAngularUnit --
ValuePair(  ProjCenterEastingGeoKey,	3090)     -- ProjLinearUnits --
ValuePair(  ProjCenterNorthingGeoKey,	3091)     -- ProjLinearUnits --
ValuePair(  ProjScaleAtNatOriginGeoKey,	3092)     -- ratio   --
ValuePair(  ProjScaleAtOriginGeoKey,ProjScaleAtNatOriginGeoKey)  -- ** alias **   --
ValuePair(  ProjScaleAtCenterGeoKey,	3093)     -- ratio   --
ValuePair(  ProjAzimuthAngleGeoKey,	3094)     -- GeogAzimuthUnit --
ValuePair(  ProjStraightVertPoleLongGeoKey,	3095)     -- GeogAngularUnit --

 6.2.4 Vertical CS Keys 
   
ValuePair(  VerticalCSTypeGeoKey,	4096)  -- Section 6.3.4.1 codes   --
ValuePair(  VerticalCitationGeoKey,	4097)  -- documentation --
ValuePair(  VerticalDatumGeoKey,	4098)  -- Section 6.3.4.2 codes   --
ValuePair(  VerticalUnitsGeoKey,	4099)  -- Section 6.3.1 (.x) codes   --
</pre>     </td>
  </tr>
</table>
<a name="a24" doxytag="geotiff.h::GTIFKeySet"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int CPL_DLL GTIFKeySet (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
geokey_t <em>keyID</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
tagtype_t <em>type</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>count</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
...&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function writes a geokey_t value to a GeoTIFF file.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>gtif</em>
&nbsp;</td><td>
 The geotiff information handle from <a class="el" href="geotiff_h.html#a18">GTIFNew</a>().</td></tr>
<tr><td valign=top><em>keyID</em>
&nbsp;</td><td>
 The geokey_t name (such as ProjectedCSTypeGeoKey). This must come from the list of legal geokey_t values (an enumeration) listed below.</td></tr>
<tr><td valign=top><em>val</em>
&nbsp;</td><td>
 The <b>val</b> argument is a pointer to the variable into which the value should be read. The type of the variable varies depending on the geokey_t given. While there is no ready mapping of geokey_t values onto types, in general code values are of type <em>short</em>, citations are strings, and everything else is of type <em>double</em>. Note that pointer's to <em>int</em> should never be passed to <a class="el" href="geotiff_h.html#a23">GTIFKeyGet</a>() for integer values as they will be shorts, and the int's may not be properly initialized (and will be grossly wrong on MSB systems).</td></tr>
<tr><td valign=top><em>index</em>
&nbsp;</td><td>
 Indicates how far into the list of values for this geokey to offset. Should normally be zero.</td></tr>
<tr><td valign=top><em>count</em>
&nbsp;</td><td>
 Indicates how many values to read. At this time all keys except for strings have only one value, so <b>index</b> should be zero, and <b>count</b> should be one.</td></tr>
</table>
</dl>
<p>

<p>
The <b>key</b> indicates the key name to be written to the file and should from the geokey_t enumeration  (eg. <code>ProjectedCSTypeGeoKey</code>). The full list of possible geokey_t values can be found in geokeys.inc, or in the online documentation for <a class="el" href="geotiff_h.html#a23">GTIFKeyGet</a>().
<p>

<p>
The <b>type</b> should be one of TYPE_SHORT, TYPE_ASCII, or TYPE_DOUBLE and will indicate the type of value being passed at the end of the argument list (the key value). The <b>count</b> should be one except for strings when it should be the length of the string (or zero to for this to be computed internally).
<p>

<p>
The actual value is passed at the end of the argument list, and should be a short, a double, or a char * value. Note that short and double values are passed as is, not as pointers.
<p>

<p>
Note that key values aren't actually flushed to the file untill <a class="el" href="geotiff_h.html#a20">GTIFWriteKeys</a>() is called. Till then  the new values are just kept with the GTIF structure.
<p>

<p>
<b>Example:</b>
<p>

<p>
<pre>
    GTIFKeySet(gtif, GTRasterTypeGeoKey, TYPE_SHORT, 1, 
               RasterPixelIsArea);
    GTIFKeySet(gtif, GTCitationGeoKey, TYPE_ASCII, 0, 
               "UTM 11 North / NAD27" );
</pre>     </td>
  </tr>
</table>
<a name="a18" doxytag="geotiff.h::GTIFNew"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
GTIF CPL_DLL* GTIFNew (
          </b></td>
          <td valign="bottom"><b>
void * <em>tif</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given an open TIFF file, look for GTIF keys and  values and return GTIF structure.
<p>
This function creates a GeoTIFF information interpretation handle (GTIF *) based on a passed in TIFF handle originally from  <a class="el" href="xtiffio_h.html#a9">XTIFFOpen</a>(). Even though the argument  (<b>tif</b>) is shown as type <code>void *</code>, it is really normally of type <code>TIFF *</code>.
<p>

<p>
The returned GTIF handle can be used to read or write GeoTIFF tags  using the various GTIF functions. The handle should be destroyed using <a class="el" href="geotiff_h.html#a19">GTIFFree</a>() before the file is closed with TIFFClose().
<p>

<p>
If the file accessed has no GeoTIFF keys, an valid (but empty) GTIF is still returned. <a class="el" href="geotiff_h.html#a18">GTIFNew</a>() is used both for existing files being read, and for new TIFF files that will have GeoTIFF tags written to them.
<p>
     </td>
  </tr>
</table>
<a name="a36" doxytag="geotiff.h::GTIFPCSToImage"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int CPL_DLL GTIFPCSToImage (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double * <em>x</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
double * <em>y</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Translate a projection coordinate to pixel/line coordinates.
<p>
At this time this function does not support PCS to image translations for tiepoints-only, or transformation matrix based definitions, only pixelscale and tiepoints formulations.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>gtif</em>
&nbsp;</td><td>
 The handle from <a class="el" href="geotiff_h.html#a18">GTIFNew</a>() indicating the target file. </td></tr>
<tr><td valign=top><em>x</em>
&nbsp;</td><td>
 A pointer to the double containing the pixel offset on input, and into which the easting/longitude will be put on completion. </td></tr>
<tr><td valign=top><em>y</em>
&nbsp;</td><td>
 A pointer to the double containing the line offset on input, and into which the northing/latitude will be put on completion.
<p>
</td></tr>
</table>
</dl><dl compact><dt>
<b>Returns: </b><dd>
 TRUE if the transformation succeeds, or FALSE if it fails. It may fail if the file doesn't have properly setup transformation information, or it is in a form unsupported by this function. </dl>    </td>
  </tr>
</table>
<a name="a20" doxytag="geotiff.h::GTIFWriteKeys"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int CPL_DLL GTIFWriteKeys (
          </b></td>
          <td valign="bottom"><b>
GTIF * <em>gtif</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function flushes all the GeoTIFF keys that have been set with the  <a class="el" href="geotiff_h.html#a24">GTIFKeySet</a>() function into the associated  TIFF file.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>gt</em>
&nbsp;</td><td>
 The GeoTIFF handle returned by GTIFNew.
<p>
</td></tr>
</table>
</dl><a class="el" href="geotiff_h.html#a24">GTIFKeySet</a>() should be called before  <a class="el" href="geotiff_h.html#a19">GTIFFree</a>() is used to deallocate a GeoTIFF access handle.     </td>
  </tr>
</table>
<hr><address><small>Generated at Sun Mar 4 23:32:45 2001 for libgeotiff by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3-20001105 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
